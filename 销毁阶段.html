<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>销毁阶段</title>
    <script src="./reactLabel/jquery.min.js"></script>
    <script src="./react-0.13.1//build/react.js"></script>
    <script src="./react-0.13.1/build/JSXTransformer.js"></script>
    <script>
        // 销毁阶段可以使用的函数
            // componentWillUnmount 在删除组件之前进行清理操作,比如计时器和事件监听器

    </script>
    <script type="text/jsx">
        var count=0;
        var style={ color:"red", border:"1px red solid"}
            var HelloWorld= React.createClass({
                render:function(){
                    console.log("render,4")
                    return <p ref="childp">
                        Hello,{this.props.name?this.props.name:"world"}
                    </p>
                },
                componentWillUnmount:function(){
                  console.log(000000000000000000000)
                }
            })
            var HellowUniverse=React.createClass({
                getInitialState:function(){
                  return {name:""}
                },
                handleChange:function(event){
                  console.log(event.target)
                  if(event.target.value=="123"){
                    console.log(React)
                    React.unmountComponentAtNode(document.getElementsByTagName('body')[0]);
                    return;
                  }
                  this.setState({name:event.target.value})
                },
                render:function(){
                  console.log(this.state)
                  // if(this.state.name=="123"){
                  //   console.log("name是123了");
                  //   return <div>123</div>
                  // }
                  return <div>
                    <HelloWorld name={this.state.name}></HelloWorld>
                    <br/>
                    <input type="text" onChange={this.handleChange} />
                  </div>
                }
            })
        React.render(<div style={style}><HellowUniverse></HellowUniverse></div>,document.body)

        // 触发componentWillUnmount函数的方法

    </script>
</head>

<body>

</body>

</html>
